#!/usr/bin/env bash
# wrapper script to print a message or send a notification

if [[ -z "${ON_TTY}" ]]; then
	# i.e. on a terminal
	ON_TTY=1
	hash tty 2>/dev/null && [[ "$(tty)" == "not a tty" ]] && ON_TTY=0
fi

# https://sean.fish/d/cross-platform/notify
# if not a tty, and we can send a system notification,
# (e.g., with notify-send, send a notification)
say() {
	if ! ((ON_TTY)); then
		if hash notify 2>/dev/null; then
			notify "$@" || return $?
			return
		fi
	fi
	echo "$@" || return $?
}

say "$@" || exit $?
